<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Galer√≠a Multimedia - M√∫sica Tradicional Tolimense</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}

    :root{
      --color-yellow:#FFEE00;
      --color-green:#008800;
      --color-red:#EE1111;
      --color-green-dark:#006600;
    }

    body{
      font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
      background:linear-gradient(135deg,#fffbe6 0%,#fff9c4 25%,#fff7a0 50%,#fff4d6 75%,#fef3c7 100%);
      min-height:100vh; padding:2rem 1rem;
    }

    .container{max-width:1400px;margin:0 auto}
    .header{text-align:center;margin-bottom:3rem}
    .header h1{
      font-size:3rem; font-weight:800; letter-spacing:.3px; margin-bottom:1rem;
      background:linear-gradient(90deg,var(--color-yellow) 0%,var(--color-green) 50%,var(--color-red) 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent; background-clip:text;
    }
    .subtitle{font-size:1.1rem;color:#6b7280;margin-bottom:1.5rem}

    .back-button{
      display:inline-flex;align-items:center;gap:.5rem;
      padding:.75rem 1.25rem;border-radius:.75rem;
      background:var(--color-green); color:#fff; text-decoration:none; font-weight:700;
      box-shadow:0 10px 28px rgba(0,136,0,.24); transition:.25s ease;
    }
    .back-button:hover{transform:translateY(-2px); background:var(--color-green-dark)}

    .gallery{
      display:grid; grid-template-columns:repeat(auto-fit,minmax(300px,1fr));
      gap:2rem; margin-top:2rem;
    }

    .photo-item{
      position:relative; border-radius:1rem; overflow:hidden; cursor:pointer;
      aspect-ratio:4/3; background:#fff; border:3px solid transparent;
      box-shadow:0 14px 36px rgba(0,0,0,.12); transition:.35s ease;
      opacity:0; transform:translateY(24px); animation:fadeUp .6s ease forwards;
    }
    .photo-item:nth-child(3n+1){border-color:var(--color-yellow)}
    .photo-item:nth-child(3n+2){border-color:var(--color-green)}
    .photo-item:nth-child(3n+3){border-color:var(--color-red)}
    .photo-item:hover{transform:translateY(-8px) scale(1.01); box-shadow:0 22px 50px rgba(0,0,0,.16)}

    @keyframes fadeUp{to{opacity:1; transform:none}}

    .photo-image,.video-element{width:100%; height:100%; object-fit:cover; user-select:none; -webkit-user-drag:none}

    .media-type-badge{
      position:absolute; top:12px; right:12px; z-index:2;
      padding:.35rem .75rem; border-radius:1rem; color:#fff; font-weight:800; font-size:.8rem;
      background:rgba(0,0,0,.85); backdrop-filter:blur(8px)
    }
    .image-badge{background:var(--color-green)}
    .video-badge{background:var(--color-red)}

    .media-overlay{
      position:absolute; inset:auto auto 14px 14px; z-index:2;
      background:rgba(0,0,0,.65); color:#fff; font-size:1.25rem; border-radius:.75rem;
      padding:.35rem .55rem; opacity:0; transition:.2s ease; backdrop-filter:blur(6px)
    }
    .photo-item:hover .media-overlay{opacity:1}

    /* Modal inmersivo */
    .modal{
      display:none; position:fixed; inset:0; z-index:1000;
      background:rgba(0,0,0,.95); backdrop-filter:blur(8px);
      cursor:zoom-out; animation:modalFade .25s ease;
    }
    @keyframes modalFade{from{opacity:0} to{opacity:1}}

    .modal-content{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center;
      max-width:100vw; max-height:100vh; padding:2rem;
    }

    .modal-image,.modal-video{
      max-width:96vw; max-height:92vh; object-fit:contain; border-radius:12px;
      box-shadow:0 26px 60px rgba(0,0,0,.45); background:#000;
    }

    /* Bot√≥n cerrar: c√≠rculo rojo siempre visible */
    .modal-close{
      position:fixed; top:28px; right:28px; z-index:1001;
      width:64px; height:64px; border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-size:2rem; line-height:1; color:#fff; background:var(--color-red);
      border:3px solid rgba(255,255,255,.15);
      box-shadow:0 16px 40px rgba(238,17,17,.35);
      cursor:pointer; transition:.2s ease;
    }
    .modal-close:hover{transform:scale(1.06)}
    .modal-close:active{transform:scale(.96)}

    /* Controles de video (opcionales) */
    .video-controls{
      position:fixed; left:50%; bottom:24px; transform:translateX(-50%);
      display:none; gap:.8rem; background:rgba(0,0,0,.78);
      padding:.6rem 1rem; border-radius:2rem; color:#fff; z-index:1002; backdrop-filter:blur(8px)
    }
    .modal:hover .video-controls{opacity:1}
    .video-control-btn{
      background:none; border:none; color:#fff; font-size:1.15rem; cursor:pointer;
      padding:.35rem; border-radius:50%; transition:.2s ease
    }
    .video-control-btn:hover{background:rgba(255,255,255,.18)}
    .video-progress{flex:1; height:6px; background:rgba(255,255,255,.3); border-radius:3px; cursor:pointer}
    .video-progress-bar{height:100%; width:0%; background:var(--color-yellow); border-radius:3px}
    .video-time{min-width:80px; display:flex; align-items:center; justify-content:center; font-size:.85rem}

    /* Responsive */
    @media (max-width:768px){
      .gallery{grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:1.25rem}
      .header h1{font-size:2.2rem}
      .modal-image,.modal-video{max-width:98vw; max-height:96vh; border-radius:8px}
      .modal-close{width:56px; height:56px; font-size:1.6rem; top:18px; right:18px}
      .video-controls{bottom:16px}
    }
    @media (max-width:480px){
      .gallery{grid-template-columns:1fr; gap:1rem}
      .header h1{font-size:1.8rem}
      .modal-close{width:50px; height:50px; font-size:1.4rem}
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üì∏üé• Galer√≠a Multimedia</h1>
      <p class="subtitle">Documentaci√≥n visual y audiovisual del proyecto de investigaci√≥n musical tolimense</p>
      <a class="back-button" href="index.html">‚Üê Regresar al inicio</a>
    </div>

    <div class="gallery">
      <!-- Reemplaza rutas por tus archivos -->
      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/1.jpg" alt="Foto 1" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/2.jpg" alt="Foto 2" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/3.jpg" alt="Foto 3" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/4.jpg" alt="Foto 4" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/5.jpg" alt="Foto 5" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <!-- Videos -->
      <div class="photo-item" onclick="openMediaModal(this.querySelector('video'), 'video')">
        <div class="media-type-badge video-badge">üé• VIDEO</div>
        <video class="video-element" muted preload="metadata">
          <source src="Videos/1.mp4" type="video/mp4">
          <source src="Videos/1.webm" type="video/webm">
        </video>
        <div class="media-overlay">‚ñ∂Ô∏è</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('video'), 'video')">
        <div class="media-type-badge video-badge">üé• VIDEO</div>
        <video class="video-element" muted preload="metadata">
          <source src="Videos/2.mp4" type="video/mp4">
          <source src="Videos/2.webm" type="video/webm">
        </video>
        <div class="media-overlay">‚ñ∂Ô∏è</div>
      </div>

      <!-- M√°s elementos de ejemplo -->
      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/6.jpg" alt="Foto 6" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/7.jpg" alt="Foto 7" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('video'), 'video')">
        <div class="media-type-badge video-badge">üé• VIDEO</div>
        <video class="video-element" muted preload="metadata">
          <source src="Videos/3.mp4" type="video/mp4">
          <source src="Videos/3.webm" type="video/webm">
        </video>
        <div class="media-overlay">‚ñ∂Ô∏è</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/8.jpg" alt="Foto 8" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/9.jpg" alt="Foto 9" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('video'), 'video')">
        <div class="media-type-badge video-badge">üé• VIDEO</div>
        <video class="video-element" muted preload="metadata">
          <source src="Videos/4.mp4" type="video/mp4">
          <source src="Videos/4.webm" type="video/webm">
        </video>
        <div class="media-overlay">‚ñ∂Ô∏è</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/10.jpg" alt="Foto 10" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/11.jpg" alt="Foto 11" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('video'), 'video')">
        <div class="media-type-badge video-badge">üé• VIDEO</div>
        <video class="video-element" muted preload="metadata">
          <source src="Videos/5.mp4" type="video/mp4">
          <source src="Videos/5.webm" type="video/webm">
        </video>
        <div class="media-overlay">‚ñ∂Ô∏è</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/12.jpg" alt="Foto 12" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/13.jpg" alt="Foto 13" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/14.jpg" alt="Foto 14" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>

      <div class="photo-item" onclick="openMediaModal(this.querySelector('img'), 'image')">
        <div class="media-type-badge image-badge">üì∑ FOTO</div>
        <img class="photo-image" src="Fotos/15.jpg" alt="Foto 15" loading="lazy">
        <div class="media-overlay">üîç</div>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="mediaModal" class="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeMediaModal()">‚úï</span>
      <img id="modalImage" class="modal-image" style="display:none" alt="">
      <video id="modalVideo" class="modal-video" controls style="display:none">Tu navegador no soporta video.</video>

      <!-- Controles personalizados video -->
      <div id="videoControls" class="video-controls">
        <button id="playPauseBtn" class="video-control-btn">‚ñ∂Ô∏è</button>
        <div id="videoProgress" class="video-progress"><div id="progressBar" class="video-progress-bar"></div></div>
        <div id="videoTime" class="video-time">0:00 / 0:00</div>
        <button id="muteBtn" class="video-control-btn">üîä</button>
        <button id="fullscreenBtn" class="video-control-btn">‚õ∂</button>
      </div>
    </div>
  </div>

  <script>
    function openMediaModal(el, type){
      const modal = document.getElementById('mediaModal');
      const img = document.getElementById('modalImage');
      const vid = document.getElementById('modalVideo');
      const ctrls = document.getElementById('videoControls');

      modal.style.display='block';
      document.body.style.overflow='hidden';

      if(type==='image'){
        ctrls.style.display='none';
        vid.style.display='none';
        img.style.display='block';
        img.src = el.src;
        img.alt = el.alt || '';
      } else {
        img.style.display='none';
        vid.style.display='block';
        ctrls.style.display='flex';
        // copiar fuentes del video
        vid.innerHTML = el.innerHTML;
        vid.load();
        setupVideoControls();
      }
    }

    function closeMediaModal(){
      const modal = document.getElementById('mediaModal');
      const vid = document.getElementById('modalVideo');
      modal.style.display='none';
      if(!vid.paused){vid.pause();}
      document.body.style.overflow='auto';
    }

    function setupVideoControls(){
      const video = document.getElementById('modalVideo');
      const playBtn = document.getElementById('playPauseBtn');
      const progress = document.getElementById('videoProgress');
      const bar = document.getElementById('progressBar');
      const time = document.getElementById('videoTime');
      const mute = document.getElementById('muteBtn');
      const fs = document.getElementById('fullscreenBtn');

      playBtn.onclick=()=>{ if(video.paused){video.play();playBtn.textContent='‚è∏Ô∏è'}else{video.pause();playBtn.textContent='‚ñ∂Ô∏è'} };
      video.addEventListener('timeupdate',()=>{
        bar.style.width = (video.currentTime/video.duration*100||0)+'%';
        time.textContent = `${fmt(video.currentTime)} / ${fmt(video.duration)}`
      });
      progress.onclick=(e)=>{
        const r=progress.getBoundingClientRect();
        const p=(e.clientX-r.left)/r.width;
        video.currentTime = p*video.duration;
      }
      mute.onclick=()=>{ video.muted=!video.muted; mute.textContent = video.muted?'üîá':'üîä' }
      fs.onclick=()=>{ if(video.requestFullscreen) video.requestFullscreen(); }
      video.addEventListener('ended',()=>{ playBtn.textContent='‚ñ∂Ô∏è'; bar.style.width='0%' });
    }

    const fmt = s => isNaN(s)?'0:00':`${Math.floor(s/60)}:${Math.floor(s%60).toString().padStart(2,'0')}`;

    // Cerrar con click fuera y con Escape
    document.getElementById('mediaModal').addEventListener('click',e=>{
      if(e.target.id==='mediaModal') closeMediaModal();
    });
    document.addEventListener('keydown',e=>{
      if(e.key==='Escape') closeMediaModal();
      const v=document.getElementById('modalVideo');
      if(document.getElementById('mediaModal').style.display==='block' && v.style.display==='block'){
        if(e.key===' '){e.preventDefault(); document.getElementById('playPauseBtn').click();}
        if(e.key==='ArrowLeft') v.currentTime=Math.max(0,v.currentTime-10);
        if(e.key==='ArrowRight') v.currentTime=Math.min(v.duration,v.currentTime+10);
      }
    });

    // swipe para cerrar en m√≥vil
    let startY=0;
    document.getElementById('mediaModal').addEventListener('touchstart',e=>startY=e.changedTouches[0].screenY);
    document.getElementById('mediaModal').addEventListener('touchend',e=>{
      const dy=Math.abs(e.changedTouches[0].screenY-startY);
      if(dy>100) closeMediaModal();
    });
  </script>
</body>
</html>
